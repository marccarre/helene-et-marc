<% @requested_cars = Wedding::Car.requested.includes(:driver).includes(:passengers).load %>

<%= content_tag("div", id: "requested-cars", class: (@requested_cars.count == 0) ? "hidden" : "visible") do -%>
  <h4>Requests-for-ride:</h4>
  <table id="table-requested-cars" class="table table-striped table-condensed table-bordered text-center">
    <thead>
      <tr>
        <th>From:</th>
        <th>To:</th>
        <th>Departure time:</th>
        <th>Required seats: </th>
        <th>Requested by: </th>
        <th>Contact: </th>
      </tr>
    </thead>
    <tbody>
      <% @requested_cars.each do |car| %>
        <%= render "wedding/cars/requested_car", car: car %>
      <% end %>
    </tbody>
  </table>
<% end -%>